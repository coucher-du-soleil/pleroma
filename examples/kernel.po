~io
~monad

ε UserProgram {ioinst : far io►Io, monad : far monad►Monad, lb : far net►HttpLb}

	δ create() -> void
		let pingpongcount : u8 = 0

	δ http-ok(rsp : str) -> str
		↵ "HTTP/1.1 200 OK
Content-Type: text/html\n\n" + rsp

	δ bang(verb: str, path : str) -> str
		↵ http-ok("<html>
<body>
Welcome to Pleroma!</body></html>")

	δ serve() -> void
		! serve()

	δ main(env: u8) -> u8

		let q : UserProgram = UserProgram()

		! serve()
		lb.start("localhost:8080", q, "bang")
		lb.next()


		↵ 0
